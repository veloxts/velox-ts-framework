---
title: REST API Architecture
description: Building external-facing REST APIs with VeloxTS.
---

Use this architecture when you need an API for external consumers, mobile apps, or third-party integrations.

## When to Choose REST

- External clients that aren't TypeScript
- Mobile apps (iOS, Android)
- Third-party integrations
- Public APIs
- OpenAPI/Swagger documentation needed

## Project Setup

```bash
npx create-velox-app my-api
# or with auth
npx create-velox-app my-api --auth
```

## How It Works

Define procedures with naming conventions, and VeloxTS generates REST endpoints:

```typescript
// src/procedures/posts.ts
import { procedures, procedure, resourceSchema, resource, resourceCollection } from '@veloxts/velox';
import { z } from '@veloxts/velox';

// Define resource schema with field visibility
const PostSchema = resourceSchema()
  .public('id', z.string())
  .public('title', z.string())
  .public('excerpt', z.string())
  .authenticated('content', z.string())
  .authenticated('authorId', z.string())
  .admin('createdAt', z.date())
  .admin('updatedAt', z.date())
  .build();

export const postProcedures = procedures('posts', {
  // GET /api/posts
  listPosts: procedure()
    .query(async ({ ctx }) => {
      const posts = await ctx.db.post.findMany();
      return resourceCollection(posts, PostSchema).forAnonymous();
    }),

  // GET /api/posts/:id
  getPost: procedure()
    .input(z.object({ id: z.string() }))
    .query(async ({ input, ctx }) => {
      const post = await ctx.db.post.findUniqueOrThrow({
        where: { id: input.id }
      });
      return resource(post, PostSchema).forAnonymous();
    }),

  // POST /api/posts
  createPost: procedure()
    .input(CreatePostSchema)
    .mutation(async ({ input, ctx }) => {
      const post = await ctx.db.post.create({ data: input });
      return resource(post, PostSchema).forAuthenticated();
    }),

  // PUT /api/posts/:id
  updatePost: procedure()
    .input(z.object({ id: z.string(), data: UpdatePostSchema }))
    .mutation(async ({ input, ctx }) => {
      const post = await ctx.db.post.update({
        where: { id: input.id },
        data: input.data,
      });
      return resource(post, PostSchema).forAuthenticated();
    }),

  // DELETE /api/posts/:id
  deletePost: procedure()
    .input(z.object({ id: z.string() }))
    .mutation(async ({ input, ctx }) => {
      await ctx.db.post.delete({ where: { id: input.id } });
      return { success: true };
    }),
});
```

## REST Naming Conventions

See [REST Conventions](/docs/router/rest-conventions/) for the complete reference.

| Prefix | Method | Path Pattern |
|--------|--------|--------------|
| `list*` | GET | `/api/{resource}` |
| `get*` | GET | `/api/{resource}/:id` |
| `create*` | POST | `/api/{resource}` |
| `update*` | PUT | `/api/{resource}/:id` |
| `delete*` | DELETE | `/api/{resource}/:id` |

## Custom Routes

Override conventions with `.rest()`:

```typescript
sendPasswordReset: procedure()
  .input(z.object({ email: z.string().email() }))
  .mutation(handler)
  .rest({
    method: 'POST',
    path: '/auth/password-reset',
  }),
```

## OpenAPI Documentation

Enable automatic Swagger UI:

```typescript
import { registerDocs } from '@veloxts/router';

await app.register(registerDocs, {
  path: '/api/docs',
  info: {
    title: 'My API',
    version: '1.0.0',
  },
});
```

Visit `http://localhost:3030/api/docs` for interactive API documentation.

## Related Content

- [REST Conventions](/docs/router/rest-conventions/) - All naming patterns
- [OpenAPI](/docs/router/openapi/) - API documentation
- [Authentication](/docs/authentication/overview/) - Secure your API
