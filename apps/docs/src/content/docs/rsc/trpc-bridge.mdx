---
title: tRPC Bridge
description: Call backend procedures from server actions.
---

Bridge server actions to your tRPC procedures for full type safety.

## Direct Procedure Call

```typescript
// app/actions/users.ts
'use server';

import { executeProcedureDirectly } from '@veloxts/web/server';
import { userProcedures } from '@/api/procedures/users';

export async function getUsers() {
  return executeProcedureDirectly(userProcedures.procedures.listUsers, {});
}

export async function createUser(input: CreateUserInput) {
  return executeProcedureDirectly(userProcedures.procedures.createUser, input);
}
```

## With Validation

```typescript
'use server';

import { validated } from '@veloxts/web/server';
import { executeProcedureDirectly } from '@veloxts/web/server';
import { CreateUserSchema } from '@/api/schemas/user';
import { userProcedures } from '@/api/procedures/users';

export const createUser = validated(CreateUserSchema, async (input) => {
  return executeProcedureDirectly(userProcedures.procedures.createUser, input);
});
```

## In Server Components

```tsx
// app/pages/users/index.tsx
import { getUsers } from '@/app/actions/users';

export default async function UsersPage() {
  const users = await getUsers();

  return (
    <ul>
      {users.map(user => (
        <li key={user.id}>{user.name}</li>
      ))}
    </ul>
  );
}
```

## Type Inference

Types flow from procedure definitions:

```typescript
// Procedure defines types via Resource API
const createUser = procedure()
  .input(CreateUserSchema)
  .mutation(async ({ input, ctx }) => {
    const user = await ctx.db.user.create({ data: input });
    return resource(user, UserSchema).forAuthenticated();
  });

// Action gets same types
export const createUser = validated(CreateUserSchema, async (input) => {
  // input is typed: CreateUserInput
  const { db } = await import('@/api/database');
  const user = await db.user.create({ data: input });
  return resource(user, UserSchema).forAuthenticated();
  // return is typed based on projection
});
```

## Related Content

- [Server Actions](/docs/rsc/server-actions/) - Action patterns
- [Procedures](/docs/router/procedures/) - Backend procedures
